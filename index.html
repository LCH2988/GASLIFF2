<!-- index.html -->

<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>報名系統</title>
</head>

<body>
  <h2>報名表單</h2>
  <form id="signupForm">
    <label for="name">姓名：</label>
    <input type="text" id="name" name="name" required><br>

    <label for="count">人數：</label>
    <input type="number" id="count" name="count" required><br>

    <label for="remarks">備註：</label>
    <input type="text" id="remarks" name="remarks"><br>

    <button type="button" onclick="submitForm()">確認</button>
  </form>

  <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
  <script>
    // 初始化 LINE LIFF
    liff.init({ liffId: '2001679903-r5VXNe5g' }).then(() => {
      console.log('LIFF initialized');

      // 透過 LIFF 獲取用戶資訊
      liff.getProfile().then(function (profile) {
        console.log('User ID:', profile.userId);
      });
    }).catch((error) => {
      console.error('LIFF initialization failed', error);
    });

    function submitForm() {
      var name = document.getElementById('name').value;
      var count = document.getElementById('count').value;
      var remarks = document.getElementById('remarks').value;

      // 取得 LINE 使用者ID
      liff.getProfile().then(function (profile) {
        var userId = profile.userId;

        // 將報名資訊發送到 Google Apps Script
        google.script.run.doPost({
          userId: userId,
          name: name,
          count: count,
          remarks: remarks
        });

        // 提示報名成功
        alert('報名成功！');
      });
    }
  </script>
</body>

</html>
